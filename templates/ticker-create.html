{% extends "base-admin.html" %}

{% block title %}Create Ticker{% endblock %}


{% block content %}
<script>
  // Function to calculate 90% of the input value
  function calculatePercentage() {
    let amount = parseFloat(document.getElementById("amount").value.replace('$', ''));
    let discountPercentage = parseFloat(document.getElementById("discount").value.replace('%', ''));

    if (!isNaN(amount) && !isNaN(discountPercentage)) {
      let discountValue = (amount * discountPercentage) / 100;
      let finalAmount = amount - discountValue;
      document.getElementById("result").value = '$' + finalAmount.toFixed(2);
    }
  }

  // Calculate Target 1 (6%)
  function calculatePercentageTarget1() {
    let amount = parseFloat(document.getElementById("amount").value.replace('$', ''));
    let target1Percentage = 6;

    if (!isNaN(amount)) {
      let target1Value = (amount * target1Percentage) / 100;
      let finalAmount = amount + target1Value;
      document.getElementById("target1").value = '$' + finalAmount.toFixed(2);
    }
  }

  // Calculate Target 2 (12%)
  function calculatePercentageTarget2() {
    let amount = parseFloat(document.getElementById("amount").value.replace('$', ''));
    let target2Percentage = 12;

    if (!isNaN(amount)) {
      let target2Value = (amount * target2Percentage) / 100;
      let finalAmount = amount + target2Value;
      document.getElementById("target2").value = '$' + finalAmount.toFixed(2);
    }
  }
</script>

<div class="container"></div>
  <form action="/save_ticker" method="POST">
    <h3>Please fill in Ticker details</h3>

    <div class="row">
      <div class="col-50">
        <label for="fname">Ticker Name</label>
        <input type="text" id="fname" name="tickername" placeholder="Ticker-Name" required>
      </div>

      <div class="col-50">
        <label for="amount">Entry Price ($)</label>
        <input type="text" id="amount" name="entryprice" placeholder="$USD"
          oninput="calculatePercentage(); calculatePercentageTarget1(); calculatePercentageTarget2()" required>
      </div>

      <div class="col-50">
        <label for="discount">Stop %</label>
        <input type="text" id="discount" name="stoppercent" placeholder="%"
          oninput="calculatePercentage(); calculatePercentageTarget1(); calculatePercentageTarget2()" required>
      </div>

      <div class="col-50">
        <label for="result">Stop Price ($)</label>
        <input type="text" id="result" name="stopprice" readonly>
      </div>

      <div class="col-50">
        <label for="target1">Target-1 ($)</label>
        <input type="text" id="target1" name="target1" readonly>
      </div>

      <div class="col-50">
        <label for="target2">Target-2 ($)</label>
        <input type="text" id="target2" name="target2" readonly>
      </div>

      <div class="col-50">
        <label for="target3">Target-3 ($)</label>
        <input type="text" id="target3" name="target3" value="0">
      </div>

      <div class="col-50">
        <label for="target4">Target-4 ($)</label>
        <input type="text" id="target4" name="target4" value="0">
      </div>
    </div>

    <input type="submit" value="Create Ticker" class="btn">
  </form>
</div>
{% endblock %}